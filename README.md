# ace-flowstats-analysis-tool
A tool that analyses and produces reports for ACE message flow acc &amp; Stats data generated in csv format. 

# Pre-req:
- This tool works on Acc & Stats snapshot data generated by App Connect Enterprise message flows. 
- The Acc & Stats data needs to be in **.csv format** and must be enabled for outputting **Averages** values.
- Following configuration is required to **server.conf.yaml** to enable stats in csv format with avg values:
```
  Snapshot:
    publicationOn: 'active'      # choose 1 of : active|inactive, explictly set 'active'. If unset will default to 'inactive'
    #accountingOrigin: 'none'    # choose 1 of : none|basic, default none
    nodeDataLevel: 'basic'       # choose 1 of : none|basic|advanced, explictly set 'basic'. If unset will default to 'none'
    outputFormat: 'json,csv'         # choose comma separated list of one or more of : csv,json,xml,usertrace. Explictly set to 'json' for WebUI. 
    #threadDataLevel: 'none'     # choose 1 of : none|basic. If unset will default to 'none'
  csv:                           # The csv section is used when either Snapshot or Archive Statistics have an output format of csv.
    filePath: ''                 # The file path where the statistics records will be written to when there is an outputFormat of csv.
                                  # If this is set to '' then the default path is <MQSI_WORKPATH>/common/stats.
    numberOfFiles: 4             # The maximum number of files that message flow statistics file writing can rotate through.
    sizeOfFile: 25               # The maximum size in MB of a single file that a statistics file can use before rotating to the next file.
    averages: true   
   
   ```
   
# Steps to execute the tool:

- Copy the App Connect Accounting and Statistics .csv files (flow stats and node stats) in a directory on your workstation.

- Ensure you have python 3.*   installed on your system.

- Run the following command :

  **"C:\\> python.exe app.py -i C:\sampleData -o C:\sampleData\output"**


- The output will be generated in the directory mentioned on the command line. It produces Bar charts for the message flows of against Top Elapsed Time and CPU Times 
- The last line on output on console would look like this:
```
Total number of unique message flows:  6
 * Serving Flask app 'app' (lazy loading)
 * Debug mode: off
 * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
 * 
 ```
 
Open this URL http://127.0.0.1:5000/ on your local browser to access the various charts produced by the tool.  The examples charts are shown below :

![image](https://user-images.githubusercontent.com/11312111/176396073-6fa2c5d5-5403-4d57-8f7d-3e55e66b28f6.png)     ![image](https://user-images.githubusercontent.com/11312111/176396659-3ab8ba73-046d-445d-a200-b3c87de7b5dd.png)


- It also produces heatmaps for the message flow(s) as shows below:

![image](https://user-images.githubusercontent.com/11312111/176395092-59067702-1d6c-4b09-86fe-d6307e7abfd5.png)
